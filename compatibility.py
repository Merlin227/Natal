from datetime import datetime
import math

def sum_digits(n):
    while n > 9:
        n = sum(int(d) for d in str(n))
    return n

def calculate_life_path_number(birth_date):
    day = birth_date.day
    month = birth_date.month
    year = birth_date.year

    total = sum_digits(day) + sum_digits(month) + sum_digits(year)
    return sum_digits(total)


def numerology_compatibility(date1, date2):
    num1 = calculate_life_path_number(date1)
    num2 = calculate_life_path_number(date2)

    difference = abs(num1 - num2)

    match difference:
        case 0:
            return 100, "Идеальное сочетание энергий. Ваши вибрации полностью синхронизированы, создавая гармоничный союз."
        case 1:
            return 95, "Почти идеальное совпадение. Вы дополняете друг друга, сохраняя индивидуальность."
        case 2:
            return 90, "Отличная совместимость. Ваши энергии хорошо сочетаются, создавая прочную связь."
        case 3:
            return 85, "Очень хорошая гармония. Вы понимаете друг друга с полуслова и поддерживаете в развитии."
        case 4:
            return 80, "Хорошая совместимость. Есть взаимопонимание и уважение к различиям."
        case 5:
            return 75, "Стабильные отношения. Вы учитесь друг у друга и растете вместе."
        case 6:
            return 70, "Умеренная совместимость. Требуется работа над пониманием, но потенциал есть."
        case 7:
            return 65, "Неплохое сочетание. Различия могут создавать сложности, но и обогащают отношения."
        case 8:
            return 60, "Средняя совместимость. Нужно прилагать усилия для нахождения общего языка."
        case 9:
            return 55, "Условная гармония. Отношения требуют компромиссов и терпения с обеих сторон."
        case 10:
            return 50, "Нейтральная совместимость. Есть точки соприкосновения, но много различий."
        case 11:
            return 45, "Сложноватые отношения. Придется много работать над взаимопониманием."
        case 12:
            return 40, "Заметные различия. Совместный путь потребует значительных усилий."
        case 13:
            return 35, "Низкая совместимость. Разные жизненные ритмы и подходы к жизни."
        case 14:
            return 30, "Слабые связи. Мало общего, много противоречий в ценностях."
        case 15:
            return 25, "Значительные расхождения. Сложно найти общую точку зрения."
        case 16:
            return 20, "Почти нет совместимости. Очень разные энергетические вибрации."
        case 17:
            return 15, "Крайне низкая гармония. Отношения будут постоянно испытываться на прочность."
        case 18:
            return 10, "Минимальное соответствие. Практически отсутствует взаимопонимание."
        case 19:
            return 5, "Почти полное несоответствие. Очень сложно построить что-то общее."
        case _:
            if difference > 19:
                return 0, "Полная несовместимость. Энергии противоречат друг другу, создавая постоянное напряжение."
            else:
                return 50, "Нейтральная совместимость. Есть точки соприкосновения, но много различий."